<!DOCTYPE html>
<html>
<head>
    <title>ç™»å…¥æ¨¡æ…‹æ¡†ä¿®å¾©é©—è­‰</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #1e293b;
            color: white;
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #475569;
            border-radius: 8px;
        }
        .status { 
            font-weight: bold; 
            padding: 5px 10px;
            border-radius: 4px;
            margin-left: 10px;
        }
        .pass { background: #10b981; }
        .fail { background: #ef4444; }
        button {
            background: #3b82f6;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #2563eb; }
        iframe {
            width: 100%;
            height: 600px;
            border: 2px solid #475569;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ ç™»å…¥æ¨¡æ…‹æ¡†ä¿®å¾©é©—è­‰</h1>
    
    <div class="test-section">
        <h2>ğŸ“‹ ä¿®å¾©é …ç›®æª¢æŸ¥æ¸…å–®</h2>
        <div id="checklist">
            <div>âœ… z-indexè¨­ç‚º9999 (æœ€ä¸Šå±¤)</div>
            <div>âœ… ä½ç½®æ”¹ç‚ºä¸­é–“åä¸Š (pt-16)</div>
            <div>âœ… æ·»åŠ èƒŒæ™¯é»æ“Šé—œé–‰åŠŸèƒ½</div>
            <div>âœ… æ”¹å–„é—œé–‰æŒ‰éˆ•æ¨£å¼å’ŒåŠŸèƒ½</div>
            <div>âœ… æ·»åŠ é€²å…¥/é€€å‡ºå‹•ç•«æ•ˆæœ</div>
            <div>âœ… å¢åŠ æ¨¡ç³ŠèƒŒæ™¯æ•ˆæœ</div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª æ‰‹å‹•æ¸¬è©¦æ­¥é©Ÿ</h2>
        <ol>
            <li>åœ¨ä¸‹æ–¹iframeä¸­é»æ“Šå³ä¸Šè§’çš„ã€ŒLoginã€æŒ‰éˆ•</li>
            <li>æª¢æŸ¥ç™»å…¥æ¨¡æ…‹æ¡†æ˜¯å¦å‡ºç¾åœ¨ç•«é¢ä¸­å¤®åä¸Šä½ç½®</li>
            <li>ç¢ºèªæ¨¡æ…‹æ¡†æ²’æœ‰è¢«å…¶ä»–å…ƒç´ é®æ“‹</li>
            <li>å˜—è©¦åœ¨ç™»å…¥è¡¨å–®ä¸­è¼¸å…¥æ–‡å­—</li>
            <li>é»æ“Šé—œé–‰æŒ‰éˆ•(X)æˆ–èƒŒæ™¯å€åŸŸé—œé–‰æ¨¡æ…‹æ¡†</li>
            <li>é‡è¤‡æ¸¬è©¦ç¢ºä¿ä¸€è‡´æ€§</li>
        </ol>
        
        <button onclick="document.getElementById('testFrame').src = document.getElementById('testFrame').src">
            ğŸ”„ é‡æ–°è¼‰å…¥æ¸¬è©¦é é¢
        </button>
        
        <button onclick="checkModalPosition()">
            ğŸ“ æª¢æŸ¥æ¨¡æ…‹æ¡†ä½ç½®
        </button>
    </div>

    <div class="test-section">
        <h2>ğŸŒ å‰ç«¯æ‡‰ç”¨æ¸¬è©¦</h2>
        <iframe id="testFrame" src="http://localhost:3000"></iframe>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š æ¸¬è©¦çµæœ</h2>
        <div id="testResults">
            <div>æ¨¡æ…‹æ¡†å¯è¦‹æ€§: <span id="visibilityStatus" class="status">æœªæ¸¬è©¦</span></div>
            <div>ä½ç½®æ­£ç¢ºæ€§: <span id="positionStatus" class="status">æœªæ¸¬è©¦</span></div>
            <div>äº’å‹•åŠŸèƒ½: <span id="interactionStatus" class="status">æœªæ¸¬è©¦</span></div>
            <div>é—œé–‰åŠŸèƒ½: <span id="closeStatus" class="status">æœªæ¸¬è©¦</span></div>
        </div>
    </div>

    <script>
        function checkModalPosition() {
            const iframe = document.getElementById('testFrame');
            const testFrame = iframe.contentWindow;
            
            if (testFrame) {
                // å˜—è©¦æª¢æŸ¥iframeå…§çš„æ¨¡æ…‹æ¡†
                try {
                    const modal = testFrame.document.querySelector('.fixed.inset-0');
                    const dialog = testFrame.document.querySelector('.bg-slate-800.rounded-xl');
                    
                    if (modal && dialog) {
                        const rect = dialog.getBoundingClientRect();
                        const viewport = {
                            width: testFrame.innerWidth,
                            height: testFrame.innerHeight
                        };
                        
                        console.log('æ¨¡æ…‹æ¡†ä½ç½®æª¢æŸ¥:', {
                            æ¨¡æ…‹æ¡†å°ºå¯¸: rect,
                            è¦–å£å°ºå¯¸: viewport,
                            å‚ç›´ä½ç½®: rect.y,
                            æ°´å¹³å±…ä¸­: Math.abs((rect.x + rect.width / 2) - (viewport.width / 2)) < 100,
                            åœ¨è¦–å£å…§: rect.y >= 0 && rect.x >= 0
                        });
                        
                        // æ›´æ–°ç‹€æ…‹é¡¯ç¤º
                        document.getElementById('visibilityStatus').textContent = 'å¯è¦‹';
                        document.getElementById('visibilityStatus').className = 'status pass';
                        
                        document.getElementById('positionStatus').textContent = 
                            (rect.y >= 50 && rect.y <= 200) ? 'ä½ç½®æ­£ç¢º' : 'ä½ç½®ç•°å¸¸';
                        document.getElementById('positionStatus').className = 
                            'status ' + ((rect.y >= 50 && rect.y <= 200) ? 'pass' : 'fail');
                            
                    } else {
                        console.log('æœªæ‰¾åˆ°æ¨¡æ…‹æ¡†å…ƒç´ ');
                        document.getElementById('visibilityStatus').textContent = 'æœªé¡¯ç¤º';
                        document.getElementById('visibilityStatus').className = 'status fail';
                    }
                } catch (error) {
                    console.log('ç„¡æ³•è¨ªå•iframeå…§å®¹ï¼Œå¯èƒ½æ˜¯åŒæºæ”¿ç­–é™åˆ¶');
                    alert('è«‹æ‰‹å‹•æª¢æŸ¥æ¨¡æ…‹æ¡†æ˜¯å¦åœ¨ç•«é¢ä¸­å¤®åä¸Šä½ç½®é¡¯ç¤º');
                }
            }
        }
        
        // å®šæœŸæª¢æŸ¥iframeè¼‰å…¥ç‹€æ…‹
        setInterval(() => {
            const iframe = document.getElementById('testFrame');
            if (iframe.contentDocument && iframe.contentDocument.readyState === 'complete') {
                console.log('iframeå·²è¼‰å…¥å®Œæˆï¼Œå¯ä»¥é€²è¡Œæ¸¬è©¦');
            }
        }, 2000);
        
        console.log('ğŸ§ª ç™»å…¥æ¨¡æ…‹æ¡†ä¿®å¾©é©—è­‰å·¥å…·å·²è¼‰å…¥');
        console.log('ğŸ“ è«‹æŒ‰ç…§æ¸¬è©¦æ­¥é©Ÿé€²è¡Œæ‰‹å‹•é©—è­‰');
    </script>
</body>
</html>